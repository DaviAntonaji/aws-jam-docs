# ğŸ›¡ï¸ Malware In your Bucket

## ğŸ“‹ VisÃ£o Geral

Este desafio foca em **seguranÃ§a de S3**, **automaÃ§Ã£o serverless** e **detecÃ§Ã£o de malware** em arquivos enviados para buckets. VocÃª precisarÃ¡ configurar um pipeline automatizado de escaneamento de arquivos usando AWS Lambda, Amazon S3 e CloudWatch Logs.

### ğŸ¯ CenÃ¡rio

Uma aplicaÃ§Ã£o web permite que usuÃ¡rios faÃ§am upload de arquivos e fotos. No back-end, os arquivos sÃ£o armazenados em um bucket Amazon S3. A aplicaÃ§Ã£o precisa garantir que os arquivos recebidos estÃ£o livres de qualquer tipo de infecÃ§Ã£o por malware.

Uma ferramenta de escaneamento foi desenvolvida em Python e implantada em uma funÃ§Ã£o Lambda chamada `bucket-scan-function`. No entanto, algo foi mal configurado e o escaneamento automÃ¡tico nÃ£o estÃ¡ funcionando apÃ³s a recriaÃ§Ã£o do bucket S3.

## ğŸ“ O Que VocÃª Vai Aprender

- âœ… Configurar gatilhos S3 â†’ Lambda (Event Notifications)
- âœ… Gerenciar permissÃµes IAM para Lambda (S3 + CloudWatch)
- âœ… Diagnosticar e resolver problemas de integraÃ§Ã£o
- âœ… Analisar logs do CloudWatch
- âœ… Implementar pipelines de seguranÃ§a serverless
- âœ… Entender arquitetura event-driven

## ğŸ› ï¸ ServiÃ§os AWS Utilizados

- **Amazon S3:** Armazenamento de arquivos
- **AWS Lambda:** ExecuÃ§Ã£o da ferramenta de escaneamento
- **Amazon CloudWatch Logs:** Logs de execuÃ§Ã£o e resultados
- **AWS IAM:** PermissÃµes e polÃ­ticas

## ğŸ“¦ InventÃ¡rio

- âœ… Um bucket S3 com nome que comeÃ§a com `file-scanning-upload-`
- âœ… Uma funÃ§Ã£o Lambda chamada `bucket-scan-function`
- âœ… Um arquivo de teste `test_file.txt` com vulnerabilidade conhecida
- âœ… CloudWatch Log Group para `/aws/lambda/bucket-scan-function`

## ğŸ¯ Objetivos

### Task 1: Finding the infection (150 pontos)

Corrigir a configuraÃ§Ã£o do sistema de escaneamento e identificar a vulnerabilidade no arquivo de teste.

**Meta:** Fazer upload do `test_file.txt` e obter o nome da vulnerabilidade detectada nos logs do CloudWatch.

## âš ï¸ ObservaÃ§Ãµes Importantes

- â±ï¸ A primeira execuÃ§Ã£o pode levar ~30 segundos para o Log Group aparecer
- ğŸ“‹ A resposta estÃ¡ no campo `detection_rule` do JSON de alerta
- ğŸ”„ O gatilho S3 â†’ Lambda foi removido e precisa ser reconfigurado
- ğŸ” Verifique as permissÃµes IAM da funÃ§Ã£o Lambda

## ğŸ† CritÃ©rios de Sucesso

- [ ] Gatilho S3 configurado corretamente
- [ ] Lambda com permissÃµes adequadas (S3 GetObject + CloudWatch Logs)
- [ ] Upload de arquivo dispara automaticamente a funÃ§Ã£o
- [ ] Logs aparecem no CloudWatch dentro de 30-60 segundos
- [ ] Vulnerabilidade identificada no campo `detection_rule`

## ğŸ“š Recursos Ãšteis

- [AWS Lambda Event Notifications](https://docs.aws.amazon.com/lambda/latest/dg/with-s3.html)
- [S3 Event Notifications](https://docs.aws.amazon.com/AmazonS3/latest/userguide/NotificationHowTo.html)
- [CloudWatch Logs Insights](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/AnalyzingLogData.html)
- [Lambda Execution Role](https://docs.aws.amazon.com/lambda/latest/dg/lambda-intro-execution-role.html)

## ğŸ¯ Dificuldade

**â­â­â­â˜†â˜† Medium**

**Tempo estimado:** 30-45 minutos

---

**ğŸ’¡ Dica:** O problema nÃ£o estÃ¡ no cÃ³digo da Lambda, mas na configuraÃ§Ã£o da integraÃ§Ã£o S3 â†’ Lambda!
